(this.webpackJsonpagendar=this.webpackJsonpagendar||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n(1),c=n.n(s),r=n(4),l=n.n(r),a=(n(14),n(3)),o=n(5),d=n(6),u=n(8),h=n(7),j=(n(15),{apiKey:f("REACT_APP_GOOGLE_API_KEY"),clientId:f("REACT_APP_GOOGLE_CLIENT_ID"),discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],scope:["https://www.googleapis.com/auth/calendar.events.readonly","https://www.googleapis.com/auth/calendar.readonly"].join(" ")}),v=Object(i.jsxs)("span",{children:["We ",Object(i.jsx)("em",{children:"never"})," access your information!"]}),p=Object(i.jsxs)("span",{children:["Your browser will connect directly to Google Calendar",Object(i.jsx)("br",{})," in order display upcoming events in a unique way."]});function f(e){var t=document.head.querySelector("[name=".concat(e,"][content]"));return t&&t.content?t.content:(console.error("Cannot retrieve value for META tag named",e),"n/a")}var g=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={isMenuOpen:!1,isFullscreen:!1,isSignedIn:!1,intervalId:null,lastFetchedMillis:null,calendarEvents:[]},i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=document.createElement("script");t.src="https://apis.google.com/js/platform.js",t.async=!0,t.defer=!0,t.onload=function(){e.didLoadGoogleApi()},document.head.appendChild(t),this.setState({intervalId:setInterval((function(){e.pulse()}),1e3)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"pulse",value:function(){if(this.state.isSignedIn){var e=Date.now();(!this.state.lastFetchedMillis||this.state.lastFetchedMillis<e-36e5)&&(this.fetchCalendarEvents(),this.setState({lastFetchedMillis:e}))}}},{key:"didLoadGoogleApi",value:function(){var e=this,t=this.onSuccess.bind(this);window.gapi.load("auth2",(function(){e.auth2=gapi.auth2.init(j),e.auth2.then((function(){e.setState({isSignedIn:e.auth2.isSignedIn.get()})}))})),window.gapi.load("signin2",(function(){var e=Object(a.a)(Object(a.a)({},j),{},{width:200,height:50,onsuccess:t});gapi.signin2.render("loginButton",e)}))}},{key:"onSuccess",value:function(){this.setState({isSignedIn:!0})}},{key:"doLogout",value:function(){var e=this;this.auth2.signOut().then((function(){e.setState({isSignedIn:!1,lastFetchedMillis:null}),window.location.reload(!1)}),(function(){alert("Failed to sign out!")}))}},{key:"doMenuButtonClicked",value:function(){this.state.isMenuOpen?this.setState({isMenuOpen:!1}):this.setState({isMenuOpen:!0})}},{key:"doOpenFullscreen",value:function(){var e=this;document.documentElement.requestFullscreen?document.documentElement.requestFullscreen().then((function(){e.setState({isFullscreen:!0})}),(function(){alert("Failed to open in fullscreen mode!")})):alert("Fullscreen mode not supported in your browser!")}},{key:"doCloseFullscreen",value:function(){var e=this;document.exitFullscreen?document.exitFullscreen().then((function(){e.setState({isFullscreen:!1})}),(function(){e.setState({isFullscreen:!1})})):alert("Fullscreen mode not supported in your browser!")}},{key:"fetchCalendarEvents",value:function(){var e=this;console.info("Will initialize client"),window.gapi.load("client",(function(){gapi.client.init(j).then((function(){console.info("Will fetch calendar events"),gapi.client.load("calendar","v3",(function(){gapi.client.calendar.events.list({calendarId:"primary",timeMin:(new Date).toISOString(),timeMax:new Date(Date.now()+864e5).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:99,orderBy:"startTime"}).then((function(t){var n,s=t.result.items,c=[];if(s.length>0)for(n=0;n<s.length;n++){var r=s[n],l=r.start.dateTime;l||(l=r.start.date),c.push(Object(i.jsxs)("div",{className:"event",children:[r.summary," (",l,")"]},r.id))}else c=[Object(i.jsx)("div",{className:"event",children:"No upcoming events found."})];e.setState({calendarEvents:c})}))}))}))}))}},{key:"renderCalendarEvents",value:function(){return Object(i.jsx)("div",{children:this.state.calendarEvents})}},{key:"renderMenuButton",value:function(){var e=this;return Object(i.jsx)("div",{className:"uiButton ".concat(this.state.isMenuOpen?"lit":""),id:"menuButton",onClick:function(){return e.doMenuButtonClicked()},children:Object(i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 32 32",children:[Object(i.jsx)("title",{children:"Menu"}),Object(i.jsx)("path",{fill:"#ffffff",d:"M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"})]})})}},{key:"renderMenuContent",value:function(){var e=this;return this.state.isMenuOpen?Object(i.jsx)("div",{id:"menuBackdrop",onClick:function(){return e.doMenuButtonClicked()},children:Object(i.jsxs)("div",{id:"menuBody",children:[Object(i.jsx)("div",{className:"menuItem",children:Object(i.jsxs)("div",{className:"content",children:[Object(i.jsxs)("p",{children:[Object(i.jsxs)("strong",{children:["Agendar",Object(i.jsx)("sup",{children:"\u2122"})]})," is a Heads-Up Display for being on time."]}),Object(i.jsx)("p",{children:"Login with Google to display your Calendar events."}),Object(i.jsx)("p",{children:v}),Object(i.jsx)("p",{children:p}),Object(i.jsxs)("p",{children:["Read the code and contribute on ",Object(i.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/outrightmental/agendar",children:"GitHub"})]}),Object(i.jsxs)("p",{children:["Authored with \u2665 by ",Object(i.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://charneykaye.com",children:"Charney Kaye"}),Object(i.jsx)("br",{})," to meet the heightened strangeness",Object(i.jsx)("br",{})," of working from everywhere."]}),Object(i.jsxs)("p",{children:["Sponsored by ",Object(i.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://outrightmental.com",children:"Outright Mental"}),Object(i.jsx)("sup",{children:"\u2122"})]})]})}),this.state.isSignedIn?Object(i.jsx)("div",{className:"menuItem menuSelection",onClick:function(){return e.doLogout()},children:"Logout"}):""]})}):""}},{key:"renderFullscreenButton",value:function(){var e=this;return this.state.isFullscreen?Object(i.jsx)("div",{className:"uiButton",id:"fullscreenButton",onClick:function(){return e.doCloseFullscreen()},children:Object(i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:[Object(i.jsx)("title",{children:"Exit Fullscreen Mode"}),Object(i.jsx)("path",{fillRule:"evenodd",fill:"#ffffff",d:"M7 7V1H5v4H1v2h6zM5 19h2v-6H1v2h4v4zm10-4h4v-2h-6v6h2v-4zm0-8h4V5h-4V1h-2v6h2z"})]})}):Object(i.jsx)("div",{className:"uiButton",id:"fullscreenButton",onClick:function(){return e.doOpenFullscreen()},children:Object(i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:[Object(i.jsx)("title",{children:"Enter Fullscreen Mode"}),Object(i.jsx)("path",{fillRule:"evenodd",fill:"#ffffff",d:"M1 1v6h2V3h4V1H1zm2 12H1v6h6v-2H3v-4zm14 4h-4v2h6v-6h-2v4zm0-16h-4v2h4v4h2V1h-2z"})]})})}},{key:"renderApp",value:function(){return this.state.isSignedIn?Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsx)("h6",{children:"Now"}),this.renderCalendarEvents()]}):Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsxs)("h1",{children:["Agendar",Object(i.jsx)("sup",{className:"tiny",children:"\u2122"})]}),Object(i.jsxs)("h2",{children:["Heads-Up Display",Object(i.jsx)("br",{})," for being on time."]}),Object(i.jsx)("button",{className:"space-above",id:"loginButton",children:"Login with Google"}),Object(i.jsxs)("div",{className:"content space-above",children:[Object(i.jsx)("p",{children:v}),Object(i.jsx)("p",{children:p})]})]})}},{key:"render",value:function(){return Object(i.jsxs)("div",{className:"App",children:[this.renderFullscreenButton(),this.renderMenuButton(),this.renderMenuContent(),this.renderApp()]})}}]),n}(s.Component),b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),s(e),c(e),r(e)}))};l.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(g,{})}),document.getElementById("root")),b()}},[[16,1,2]]]);
//# sourceMappingURL=main.8db3d33b.chunk.js.map